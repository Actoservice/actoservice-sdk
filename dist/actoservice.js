!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e["actoservice-sdk"]={},e.React)}(this,function(e,r){"use strict";var c="default"in r?r.default:r,g=Array.isArray,t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}var a="object"==typeof t&&t&&t.Object===Object&&t,o="object"==typeof self&&self&&self.Object===Object&&self,u=a||o||Function("return this")(),i=u.Symbol,s=Object.prototype,l=s.hasOwnProperty,p=s.toString,f=i?i.toStringTag:void 0;var v=function(e){var t=l.call(e,f),n=e[f];try{e[f]=void 0}catch(e){}var r=p.call(e);return t?e[f]=n:delete e[f],r},h=Object.prototype.toString;var d=function(e){return h.call(e)},y=i?i.toStringTag:void 0;var b=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":y&&y in Object(e)?v(e):d(e)};var _=function(e){return null!=e&&"object"==typeof e};var m=function(e){return"symbol"==typeof e||_(e)&&"[object Symbol]"==b(e)},j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/;var O=function(e,t){if(g(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!m(e))||w.test(e)||!j.test(e)||null!=t&&e in Object(t)};var C=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var A,E=function(e){if(!C(e))return!1;var t=b(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},S=u["__core-js_shared__"],x=(A=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";var k=function(e){return!!x&&x in e},P=Function.prototype.toString;var T=function(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""},M=/^\[object .+?Constructor\]$/,z=Function.prototype,R=Object.prototype,q=z.toString,F=R.hasOwnProperty,I=RegExp("^"+q.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var $=function(e){return!(!C(e)||k(e))&&(E(e)?I:M).test(T(e))};var D=function(e,t){return null==e?void 0:e[t]};var B=function(e,t){var n=D(e,t);return $(n)?n:void 0},U=B(Object,"create");var V=function(){this.__data__=U?U(null):{},this.size=0};var N=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},L=Object.prototype.hasOwnProperty;var W=function(e){var t=this.__data__;if(U){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return L.call(t,e)?t[e]:void 0},H=Object.prototype.hasOwnProperty;var G=function(e){var t=this.__data__;return U?void 0!==t[e]:H.call(t,e)};var J=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=U&&void 0===t?"__lodash_hash_undefined__":t,this};function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}K.prototype.clear=V,K.prototype.delete=N,K.prototype.get=W,K.prototype.has=G,K.prototype.set=J;var Q=K;var X=function(){this.__data__=[],this.size=0};var Y=function(e,t){return e===t||e!=e&&t!=t};var Z=function(e,t){for(var n=e.length;n--;)if(Y(e[n][0],t))return n;return-1},ee=Array.prototype.splice;var te=function(e){var t=this.__data__,n=Z(t,e);return!(n<0||(n==t.length-1?t.pop():ee.call(t,n,1),--this.size,0))};var ne=function(e){var t=this.__data__,n=Z(t,e);return n<0?void 0:t[n][1]};var re=function(e){return-1<Z(this.__data__,e)};var oe=function(e,t){var n=this.__data__,r=Z(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ie.prototype.clear=X,ie.prototype.delete=te,ie.prototype.get=ne,ie.prototype.has=re,ie.prototype.set=oe;var ae=ie,ue=B(u,"Map");var ce=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var se=function(e,t){var n=e.__data__;return ce(t)?n["string"==typeof t?"string":"hash"]:n.map};var le=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t};var pe=function(e){return se(this,e).get(e)};var fe=function(e){return se(this,e).has(e)};var ve=function(e,t){var n=se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function he(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}he.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(ue||ae),string:new Q}},he.prototype.delete=le,he.prototype.get=pe,he.prototype.has=fe,he.prototype.set=ve;var de=he,ye="Expected a function";function ge(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(ye);var a=function(){var e=arguments,t=i?i.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=o.apply(this,e);return a.cache=n.set(t,r)||n,r};return a.cache=new(ge.Cache||de),a}ge.Cache=de;var be=ge;var _e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,me=/\\(\\)?/g,je=function(e){var t=be(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(_e,function(e,t,n,r){o.push(n?r.replace(me,"$1"):t||e)}),o});var we=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Oe=1/0,Ce=i?i.prototype:void 0,Ae=Ce?Ce.toString:void 0;var Ee=function e(t){if("string"==typeof t)return t;if(g(t))return we(t,e)+"";if(m(t))return Ae?Ae.call(t):"";var n=t+"";return"0"==n&&1/t==-Oe?"-0":n};var Se=function(e){return null==e?"":Ee(e)};var xe=function(e,t){return g(e)?e:O(e,t)?[e]:je(Se(e))};var ke=function(e){if("string"==typeof e||m(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var Pe=function(e,t){for(var n=0,r=(t=xe(t,e)).length;null!=e&&n<r;)e=e[ke(t[n++])];return n&&n==r?e:void 0};var Te=function(e,t,n){var r=null==e?void 0:Pe(e,t);return void 0===r?n:r};var Me=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var ze=function(e){return this.__data__.get(e)};var Re=function(e){return this.__data__.has(e)};var qe=function(e,t){var n=this.__data__;if(n instanceof ae){var r=n.__data__;if(!ue||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new de(r)}return n.set(e,t),this.size=n.size,this};function Fe(e){var t=this.__data__=new ae(e);this.size=t.size}Fe.prototype.clear=function(){this.__data__=new ae,this.size=0},Fe.prototype.delete=Me,Fe.prototype.get=ze,Fe.prototype.has=Re,Fe.prototype.set=qe;var Ie=Fe;var $e=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},De=function(){try{var e=B(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Be=function(e,t,n){"__proto__"==t&&De?De(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ue=Object.prototype.hasOwnProperty;var Ve=function(e,t,n){var r=e[t];Ue.call(e,t)&&Y(r,n)&&(void 0!==n||t in e)||Be(e,t,n)};var Ne=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var u=t[i],c=r?r(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),o?Be(n,u,c):Ve(n,u,c)}return n};var Le=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var We=function(e){return _(e)&&"[object Arguments]"==b(e)},He=Object.prototype,Ge=He.hasOwnProperty,Je=He.propertyIsEnumerable,Ke=We(function(){return arguments}())?We:function(e){return _(e)&&Ge.call(e,"callee")&&!Je.call(e,"callee")};var Qe=function(){return!1},Xe=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?u.Buffer:void 0,i=(o?o.isBuffer:void 0)||Qe;e.exports=i}),Ye=/^(?:0|[1-9]\d*)$/;var Ze=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Ye.test(e))&&-1<e&&e%1==0&&e<t};var et=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Arguments]"]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object Boolean]"]=tt["[object DataView]"]=tt["[object Date]"]=tt["[object Error]"]=tt["[object Function]"]=tt["[object Map]"]=tt["[object Number]"]=tt["[object Object]"]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object WeakMap]"]=!1;var nt=function(e){return _(e)&&et(e.length)&&!!tt[b(e)]};var rt=function(t){return function(e){return t(e)}},ot=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&a.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),it=ot&&ot.isTypedArray,at=it?rt(it):nt,ut=Object.prototype.hasOwnProperty;var ct=function(e,t){var n=g(e),r=!n&&Ke(e),o=!n&&!r&&Xe(e),i=!n&&!r&&!o&&at(e),a=n||r||o||i,u=a?Le(e.length,String):[],c=u.length;for(var s in e)!t&&!ut.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ze(s,c))||u.push(s);return u},st=Object.prototype;var lt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)};var pt=function(t,n){return function(e){return t(n(e))}},ft=pt(Object.keys,Object),vt=Object.prototype.hasOwnProperty;var ht=function(e){if(!lt(e))return ft(e);var t=[];for(var n in Object(e))vt.call(e,n)&&"constructor"!=n&&t.push(n);return t};var dt=function(e){return null!=e&&et(e.length)&&!E(e)};var yt=function(e){return dt(e)?ct(e):ht(e)};var gt=function(e,t){return e&&Ne(t,yt(t),e)};var bt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},_t=Object.prototype.hasOwnProperty;var mt=function(e){if(!C(e))return bt(e);var t=lt(e),n=[];for(var r in e)("constructor"!=r||!t&&_t.call(e,r))&&n.push(r);return n};var jt=function(e){return dt(e)?ct(e,!0):mt(e)};var wt=function(e,t){return e&&Ne(t,jt(t),e)},Ot=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?u.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}});var Ct=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var At=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var Et=function(){return[]},St=Object.prototype.propertyIsEnumerable,xt=Object.getOwnPropertySymbols,kt=xt?function(t){return null==t?[]:(t=Object(t),At(xt(t),function(e){return St.call(t,e)}))}:Et;var Pt=function(e,t){return Ne(e,kt(e),t)};var Tt=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},Mt=pt(Object.getPrototypeOf,Object),zt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Tt(t,kt(e)),e=Mt(e);return t}:Et;var Rt=function(e,t){return Ne(e,zt(e),t)};var qt=function(e,t,n){var r=t(e);return g(e)?r:Tt(r,n(e))};var Ft=function(e){return qt(e,yt,kt)};var It=function(e){return qt(e,jt,zt)},$t=B(u,"DataView"),Dt=B(u,"Promise"),Bt=B(u,"Set"),Ut=B(u,"WeakMap"),Vt="[object Map]",Nt="[object Promise]",Lt="[object Set]",Wt="[object WeakMap]",Ht="[object DataView]",Gt=T($t),Jt=T(ue),Kt=T(Dt),Qt=T(Bt),Xt=T(Ut),Yt=b;($t&&Yt(new $t(new ArrayBuffer(1)))!=Ht||ue&&Yt(new ue)!=Vt||Dt&&Yt(Dt.resolve())!=Nt||Bt&&Yt(new Bt)!=Lt||Ut&&Yt(new Ut)!=Wt)&&(Yt=function(e){var t=b(e),n="[object Object]"==t?e.constructor:void 0,r=n?T(n):"";if(r)switch(r){case Gt:return Ht;case Jt:return Vt;case Kt:return Nt;case Qt:return Lt;case Xt:return Wt}return t});var Zt=Yt,en=Object.prototype.hasOwnProperty;var tn=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&en.call(e,"index")&&(n.index=e.index,n.input=e.input),n},nn=u.Uint8Array;var rn=function(e){var t=new e.constructor(e.byteLength);return new nn(t).set(new nn(e)),t};var on=i?i.prototype:void 0;on&&on.valueOf;var an=function(e,t){var n=t?rn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var un=Object.create,cn=function(){function n(){}return function(e){if(!C(e))return{};if(un)return un(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();var sn=function(e){return"function"!=typeof e.constructor||lt(e)?{}:cn(Mt(e))};var ln=function(e){return _(e)&&"[object Map]"==Zt(e)},pn=ot&&ot.isMap,fn=pn?rt(pn):ln;var vn=function(e){return _(e)&&"[object Set]"==Zt(e)},hn=ot&&ot.isSet,dn=hn?rt(hn):vn,yn=1,gn=2,bn=4,_n="[object Arguments]",mn="[object Function]",jn="[object GeneratorFunction]",wn="[object Object]";var On=function n(r,o,i,e,t,a){var u,c=o&yn,s=o&gn,l=o&bn;if(i&&(u=t?i(r,e,t,a):i(r)),void 0!==u)return u;if(!C(r))return r;var p=g(r);if(p){if(u=tn(r),!c)return Ct(r,u)}else{var f=Zt(r),v=f==mn||f==jn;if(Xe(r))return Ot(r,c);if(f!=wn&&f!=_n&&(!v||t))return t?r:{};if(u=s||v?{}:sn(r),!c)return s?Rt(r,wt(u,r)):Pt(r,gt(u,r))}a||(a=new Ie);var h=a.get(r);if(h)return h;if(a.set(r,u),dn(r))return r.forEach(function(e){u.add(n(e,o,i,e,r,a))}),u;if(fn(r))return r.forEach(function(e,t){u.set(t,n(e,o,i,t,r,a))}),u;var d=l?s?It:Ft:s?keysIn:yt,y=p?void 0:d(r);return $e(y||r,function(e,t){y&&(e=r[t=e]),Ve(u,t,n(e,o,i,t,r,a))}),u};var Cn=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var An=function(e,t,n){var r=-1,o=e.length;t<0&&(t=o<-t?0:o+t),(n=o<n?o:n)<0&&(n+=o),o=n<t?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};var En=function(e,t){return t.length<2?e:Pe(e,An(t,0,-1))};var Sn=function(e,t){return t=xe(t,e),null==(e=En(e,t))||delete e[ke(Cn(t))]},xn=Function.prototype,kn=Object.prototype,Pn=xn.toString,Tn=kn.hasOwnProperty,Mn=Pn.call(Object);var zn=function(e){if(!_(e)||"[object Object]"!=b(e))return!1;var t=Mt(e);if(null===t)return!0;var n=Tn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pn.call(n)==Mn};var Rn=function(e){return zn(e)?void 0:e},qn=i?i.isConcatSpreadable:void 0;var Fn=function(e){return g(e)||Ke(e)||!!(qn&&e&&e[qn])};var In=function e(t,n,r,o,i){var a=-1,u=t.length;for(r||(r=Fn),i||(i=[]);++a<u;){var c=t[a];0<n&&r(c)?1<n?e(c,n-1,r,o,i):Tt(i,c):o||(i[i.length]=c)}return i};var $n=function(e){return null!=e&&e.length?In(e,1):[]};var Dn=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Bn=Math.max;var Un=function(i,a,u){return a=Bn(void 0===a?i.length-1:a,0),function(){for(var e=arguments,t=-1,n=Bn(e.length-a,0),r=Array(n);++t<n;)r[t]=e[a+t];t=-1;for(var o=Array(a+1);++t<a;)o[t]=e[t];return o[a]=u(r),Dn(i,this,o)}};var Vn=function(e){return function(){return e}};var Nn=function(e){return e},Ln=De?function(e,t){return De(e,"toString",{configurable:!0,enumerable:!1,value:Vn(t),writable:!0})}:Nn,Wn=Date.now;var Hn=function(n){var r=0,o=0;return function(){var e=Wn(),t=16-(e-o);if(o=e,0<t){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}(Ln);Gn=function(t,e){var n={};if(null==t)return n;var r=!1;e=we(e,function(e){return e=xe(e,t),r||(r=1<e.length),e}),Ne(t,It(t),n),r&&(n=On(n,7,Rn));for(var o=e.length;o--;)Sn(n,e[o]);return n},Hn(Un(Gn,void 0,$n),Gn+"");var Gn;var Jn=function(e,t,n){(void 0===n||Y(e[t],n))&&(void 0!==n||t in e)||Be(e,t,n)};var Kn=function(c){return function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var u=i[c?a:++r];if(!1===t(o[u],u,o))break}return e}}();var Qn=function(e){return _(e)&&dt(e)};var Xn=function(e,t){return"__proto__"==t?void 0:e[t]};var Yn=function(e){return Ne(e,jt(e))};var Zn=function(e,t,n,r,o,i,a){var u=Xn(e,n),c=Xn(t,n),s=a.get(c);if(s)Jn(e,n,s);else{var l=i?i(u,c,n+"",e,t,a):void 0,p=void 0===l;if(p){var f=g(c),v=!f&&Xe(c),h=!f&&!v&&at(c);l=c,f||v||h?l=g(u)?u:Qn(u)?Ct(u):v?Ot(c,!(p=!1)):h?an(c,!(p=!1)):[]:zn(c)||Ke(c)?Ke(l=u)?l=Yn(u):(!C(u)||r&&E(u))&&(l=sn(c)):p=!1}p&&(a.set(c,l),o(l,c,r,i,a),a.delete(c)),Jn(e,n,l)}};var er=function r(o,i,a,u,c){o!==i&&Kn(i,function(e,t){if(C(e))c||(c=new Ie),Zn(o,i,t,a,r,u,c);else{var n=u?u(Xn(o,t),e,t+"",o,i,c):void 0;void 0===n&&(n=e),Jn(o,t,n)}},jt)};var tr=function(e,t){return Hn(Un(e,t,Nn),e+"")};var nr=function(e,t,n){if(!C(n))return!1;var r=typeof t;return!!("number"==r?dt(n)&&Ze(t,n.length):"string"==r&&t in n)&&Y(n[t],e)};var rr=function(u){return tr(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0;for(o=3<u.length&&"function"==typeof o?(r--,o):void 0,i&&nr(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&u(e,a,n,o)}return e})},or=rr(function(e,t,n){er(e,t,n)}),ir=Object.prototype.hasOwnProperty,ar=(rr(function(e,t){if(lt(t)||dt(t))Ne(t,yt(t),e);else for(var n in t)ir.call(t,n)&&Ve(e,n,t[n])}),"__title__"),ur="defaultValue";console.log(ur,"value",ar,"title","type");var cr=function(n){return function(e){var t=e.configMap;return Te(Te(t,n),"value",Te(t,n+"."+ur))}},sr=function(){return window.self!==window.top},lr=c.createContext(),pr=lr.Provider,fr=lr.Consumer,vr="__ACTOSERVICE__ACTION__",hr="AS:sdk:change_edit",dr="AS:sdk:update_config",yr=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},gr=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),br=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},_r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},mr=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},jr=require("prop-types"),wr=function(e){function n(e){yr(this,n);var t=mr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={configMap:window.__ACTOSERVICE__SCHEME__,isEditing:e.editing||sr()},window.__ACTOSERVICE__SCHEME__=null,t.updateConfig=t.updateConfig.bind(t),t}return _r(n,e),gr(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.scheme;this.injectCSS(),sr()&&this._registerListener(),this.props.scheme||this.state.configMap?this.state.configMap||(C(e)&&this.setState({configMap:e}),"string"==typeof e&&fetch(e).then(function(e){return e.json()}).then(function(e){return t.setState({configMap:e})}).catch(function(e){return console.error("Cant find configMap")})):console.error("Scheme is not specified")}},{key:"injectCSS",value:function(){var e=document.createElement("style");e.innerHTML="\n  @-webkit-keyframes pulse {\n    0% {\n      -webkit-box-shadow: 0 0 0 0 rgba(204,169,44, 0.4);\n    }\n    70% {\n        -webkit-box-shadow: 0 0 0 10px rgba(204,169,44, 0);\n    }\n    100% {\n        -webkit-box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n    }\n  }\n  @keyframes pulse {\n    0% {\n      -moz-box-shadow: 0 0 0 0 #0a6c8f;\n      box-shadow: 0 0 0 0 #0a6c8f;\n    }\n    70% {\n        -moz-box-shadow: 0 0 0 10px rgba(204,169,44, 0);\n        box-shadow: 0 0 0 10px rgba(204,169,44, 0);\n    }\n    100% {\n        -moz-box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n        box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n    }\n  }\n  .body {\n    padding: 0;\n    margin: 0;\n  }\n  .as-action-hint {\n    z-index: 9999;\n    animation: pulse 2s infinite;\n  }\n  .Popover {\n    z-index: 22;\n  }\n  .Popover-body {\n    display: inline-flex;\n    flex-direction: column;\n    padding: 2rem 4rem;\n    background: hsl(0, 0%, 27%);\n    color: white;\n    border-radius: 0.3rem;\n  }\n  \n  .Popover-tipShape {\n    fill: hsl(0, 0%, 27%);\n  }\n  .Target {\n    -webkit-user-select: none;\n    position: relative;\n    display: inline-block;\n    color: hsla(0, 0%, 0%, 0.45);\n    color: white;\n    white-space: pre-wrap;\n    text-align: center;\n    text-transform: uppercase;\n    border-radius: 0.2rem;\n    overflow: hidden;\n  }\n  \n  .Target-Move {\n    padding: 1rem;\n    cursor: move;\n    border-bottom: 1px solid white;\n    background: hsl(173, 69%, 48%);\n  }\n  \n  .Target-Toggle {\n    display: block;\n    padding: 1rem;\n    cursor: pointer;\n    background: hsl(346, 62%, 55%);\n  }\n  .Target.is-open .Target-Toggle {\n    background: hsl(346, 80%, 50%);\n  }\n",document.head.appendChild(e)}},{key:"_isASAction",value:function(e){var t=Te(e,vr);return!!t&&[hr,dr].includes(t)}},{key:"_registerListener",value:function(){var r=this;window.onmessage=function(e){var t=e.origin,n=e.data;if(console.log("message received",t,n),r._isASAction(n))switch(Te(n,vr)){case hr:r.setState({editing:Te(n,"payload")});break;case dr:r.updateConfig(Te(n,"payload"));break;default:console.warn("Wrong action received",n)}}}},{key:"updateConfig",value:function(t){var n=this,e=or(this.state.configMap,t);this.setState({configMap:e},function(){var e;"parent"in window&&parent.postMessage((br(e={},vr,"AS:sdk:notify_updates"),br(e,"payload",{updates:t,result:n.state.configMap}),e),"*")})}},{key:"render",value:function(){var e=this.state,t=e.configMap,n=e.isEditing,r=this.props.children;return c.createElement(pr,{value:{configMap:t,isEditing:n,updateConfig:this.updateConfig}},c.Children.only(r))}}]),n}(c.Component);wr.propTypes={editing:jr.bool,scheme:jr.oneOfType([jr.string,jr.object]).isRequired};var Or=function(e,t,n,r){if(!C(e))return e;for(var o=-1,i=(t=xe(t,e)).length,a=i-1,u=e;null!=u&&++o<i;){var c=ke(t[o]),s=n;if(o!=a){var l=u[c];void 0===(s=r?r(l,c,u):void 0)&&(s=C(l)?l:Ze(t[o+1])?[]:{})}Ve(u,c,s),u=u[c]}return e};var Cr=function(e,t,n){return null==e?e:Or(e,t,n)},Ar=Object.prototype.hasOwnProperty;var Er=function(e){if(null==e)return!0;if(dt(e)&&(g(e)||"string"==typeof e||"function"==typeof e.splice||Xe(e)||at(e)||Ke(e)))return!e.length;var t=Zt(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(lt(e))return!ht(e).length;for(var n in e)if(Ar.call(e,n))return!1;return!0},Sr=require("prop-types");function xr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{value:n,onChange:r}))}xr.propTypes={title:Sr.string,value:Sr.string,onChange:Sr.func.isRequired};var kr=require("prop-types"),Pr=function(e){function n(e){yr(this,n);var t=mr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.fileInputRef=c.createRef(),t.onChange=t.onChange.bind(t),t.onSelect=t.onSelect.bind(t),t}return _r(n,e),gr(n,[{key:"onChange",value:function(e){var t=this,n=new FileReader;n.onload=function(e){return t.props.onChange({target:{value:n.result}})},n.readAsDataURL(e.target.files[0])}},{key:"onSelect",value:function(){this.fileInputRef.current.click()}},{key:"render",value:function(){var e=this.props,t=e.title;e.value;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("button",{onClick:this.onSelect},"Select File"),c.createElement("input",{ref:this.fileInputRef,style:{display:"none"},type:"file",name:"",multiple:!1,accept:"image/x-png,image/gif,image/jpeg",onChange:this.onChange}))}}]),n}(c.Component);Pr.propTypes={title:kr.string,value:kr.string,onChange:kr.func.isRequired};var Tr=require("prop-types");function Mr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{type:"color",value:n,onChange:r}))}Mr.propTypes={title:Tr.string,value:Tr.string,onChange:Tr.func.isRequired};var zr=require("prop-types");function Rr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{type:"number",value:n,onChange:r}))}Rr.propTypes={title:zr.string,value:zr.string,onChange:zr.func.isRequired};var qr=require("prop-types");function Fr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{type:"phone",value:n,onChange:r}))}Fr.propTypes={title:qr.string,value:qr.string,onChange:qr.func.isRequired};var Ir,$r="AS:string",Dr="AS:number",Br="AS:color",Ur="AS:phone",Vr="AS:image",Nr=[$r,Dr,Br,Ur,Vr],Lr=require("prop-types"),Wr=(br(Ir={},Br,Mr),br(Ir,$r,xr),br(Ir,Vr,Pr),br(Ir,Dr,Rr),br(Ir,Ur,Fr),Ir),Hr=function(e){function n(e){yr(this,n);var t=mr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onChange=t.onChange.bind(t),t}return _r(n,e),gr(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.path,e.target.value)}},{key:"render",value:function(){var e=this.props.type,t={title:this.props.title,value:this.props.value,onChange:this.onChange},n=Wr[e];if(!n)throw new Error("Wrong action type: "+e);return c.createElement(n,t)}}]),n}(c.PureComponent);Hr.propTypes={path:Lr.string.isRequired,type:Lr.oneOf(Nr),value:Lr.any,title:Lr.string,onChange:Lr.func.isRequired};var Gr=require("prop-types"),Jr=require("react-popover"),Kr=function(e){function n(e){yr(this,n);var t=mr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={openAction:!1},t.openAction=t.openAction.bind(t),t.closeActions=t.closeActions.bind(t),t.generateComponentAction=t.generateComponentAction.bind(t),t.handleChange=t.handleChange.bind(t),t}return _r(n,e),gr(n,[{key:"openAction",value:function(e){e.preventDefault(),Er(n.lastOpenPopover)||n.lastOpenPopover===this||n.lastOpenPopover.closeActions(),(n.lastOpenPopover=this).setState({openAction:!0})}},{key:"closeActions",value:function(){this.setState({openAction:!1})}},{key:"handleChange",value:function(e,t){var n={};Cr(n,e+".value",t),console.log(n),this.props.actoservice.updateConfig(n)}},{key:"generateComponentAction",value:function(){var t=this,e=this.props.actoservice,n=e.paths,r=e.scheme;return n.map(function(e){return c.createElement(Hr,{key:e,path:e,title:Te(r,e+".title"),onChange:t.handleChange,type:Te(r,e+".type"),value:Te(r,e+".value")})})}},{key:"render",value:function(){var e=this.props.classes,t=this.props.actoservice,n=r.cloneElement(this.props.children,{actoservice:{scheme:t.scheme}});return t.isEditing?c.createElement("div",{className:"as-action-cntr "+Te(e,"container",""),onMouseOver:this.openAction,style:{position:"relative",transition:"200ms box-shadow",boxShadow:this.state.openAction?"2px 2px 36px -1px rgba(0,0,0,0.75)":"none"}},c.createElement("div",{className:"as-action-hint "+Te(e,"hint",""),style:{position:"absolute",top:-10,right:-10,width:20,height:20,borderRadius:10,backgroundColor:"#0a6c8f",opacity:this.state.openAction?0:1,transition:"200ms opacity",boxShadow:"2px 2px 36px -1px rgba(0,0,0,0.75)"}}),c.createElement(Jr,{preferPlace:"below",isOpen:this.state.openAction,body:this.generateComponentAction(),onOuterAction:this.closeActions,enterExitTransitionDurationMs:100},n)):n}}]),n}(c.PureComponent);Kr.lastOpenPopover=null,Kr.propTypes={classes:Gr.shape({container:Gr.string,hint:Gr.string}),actoservice:Gr.shape({paths:Gr.arrayOf(Gr.string).isRequired,schemes:Gr.object,updateConfig:Gr.func.isRequired,isEditing:Gr.bool.isRequired}).isRequired},e.default=wr,e.withBind=function(u){return function(a){var e=function(e){function t(){return yr(this,t),mr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _r(t,e),gr(t,[{key:"render",value:function(){var i=this;return c.createElement(fr,null,function(e){var r=e.configMap,t=e.isEditing,n=e.updateConfig,o={};return u.forEach(function(e){var t,n;Cr(o,e+".value",cr(e)({configMap:r})),Cr(o,e+".title",Te(Te(t=r,n=e),"title",Te(t,n+"."+ar))),Cr(o,e+".type",Te(r,e+".type"))}),c.createElement(Kr,{classes:i.props.classes,actoservice:{paths:u,scheme:o,updateConfig:n,isEditing:t}},c.createElement(a,i.props))})}}]),t}(c.Component);return e.displayName="withBind ["+(a.displayName||a.name)+"]",e}},e.bindValue=function(e){return c.createElement(fr,null,cr(e))},e.Types=Nr,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=actoservice.js.map
