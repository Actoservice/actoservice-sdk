!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e["actoservice-sdk"]={},e.React)}(this,function(e,a){"use strict";var c="default"in a?a.default:a,y=Array.isArray,t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}var u="object"==typeof t&&t&&t.Object===Object&&t,r="object"==typeof self&&self&&self.Object===Object&&self,s=u||r||Function("return this")(),o=s.Symbol,i=Object.prototype,p=i.hasOwnProperty,l=i.toString,f=o?o.toStringTag:void 0;var v=function(e){var t=p.call(e,f),n=e[f];try{e[f]=void 0}catch(e){}var r=l.call(e);return t?e[f]=n:delete e[f],r},h=Object.prototype.toString;var d=function(e){return h.call(e)},g=o?o.toStringTag:void 0;var b=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":g&&g in Object(e)?v(e):d(e)};var A=function(e){return null!=e&&"object"==typeof e};var _=function(e){return"symbol"==typeof e||A(e)&&"[object Symbol]"==b(e)},m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/;var j=function(e,t){if(y(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_(e))||w.test(e)||!m.test(e)||null!=t&&e in Object(t)};var O=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var C,E=function(e){if(!O(e))return!1;var t=b(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},x=s["__core-js_shared__"],S=(C=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";var k=function(e){return!!S&&S in e},M=Function.prototype.toString;var P=function(e){if(null!=e){try{return M.call(e)}catch(e){}try{return e+""}catch(e){}}return""},R=/^\[object .+?Constructor\]$/,T=Function.prototype,z=Object.prototype,q=T.toString,F=z.hasOwnProperty,B=RegExp("^"+q.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var N=function(e){return!(!O(e)||k(e))&&(E(e)?B:R).test(P(e))};var I=function(e,t){return null==e?void 0:e[t]};var H=function(e,t){var n=I(e,t);return N(n)?n:void 0},U=H(Object,"create");var V=function(){this.__data__=U?U(null):{},this.size=0};var L=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},D=Object.prototype.hasOwnProperty;var W=function(e){var t=this.__data__;if(U){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return D.call(t,e)?t[e]:void 0},Q=Object.prototype.hasOwnProperty;var X=function(e){var t=this.__data__;return U?void 0!==t[e]:Q.call(t,e)};var G=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=U&&void 0===t?"__lodash_hash_undefined__":t,this};function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}J.prototype.clear=V,J.prototype.delete=L,J.prototype.get=W,J.prototype.has=X,J.prototype.set=G;var Y=J;var Z=function(){this.__data__=[],this.size=0};var $=function(e,t){return e===t||e!=e&&t!=t};var K=function(e,t){for(var n=e.length;n--;)if($(e[n][0],t))return n;return-1},ee=Array.prototype.splice;var te=function(e){var t=this.__data__,n=K(t,e);return!(n<0||(n==t.length-1?t.pop():ee.call(t,n,1),--this.size,0))};var ne=function(e){var t=this.__data__,n=K(t,e);return n<0?void 0:t[n][1]};var re=function(e){return-1<K(this.__data__,e)};var oe=function(e,t){var n=this.__data__,r=K(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ie.prototype.clear=Z,ie.prototype.delete=te,ie.prototype.get=ne,ie.prototype.has=re,ie.prototype.set=oe;var ae=ie,ue=H(s,"Map");var ce=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var se=function(e,t){var n=e.__data__;return ce(t)?n["string"==typeof t?"string":"hash"]:n.map};var pe=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t};var le=function(e){return se(this,e).get(e)};var fe=function(e){return se(this,e).has(e)};var ve=function(e,t){var n=se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function he(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}he.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(ue||ae),string:new Y}},he.prototype.delete=pe,he.prototype.get=le,he.prototype.has=fe,he.prototype.set=ve;var de=he,ge="Expected a function";function ye(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(ge);var a=function(){var e=arguments,t=i?i.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=o.apply(this,e);return a.cache=n.set(t,r)||n,r};return a.cache=new(ye.Cache||de),a}ye.Cache=de;var be=ye;var Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_e=/\\(\\)?/g,me=function(e){var t=be(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(Ae,function(e,t,n,r){o.push(n?r.replace(_e,"$1"):t||e)}),o});var we=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},je=1/0,Oe=o?o.prototype:void 0,Ce=Oe?Oe.toString:void 0;var Ee=function e(t){if("string"==typeof t)return t;if(y(t))return we(t,e)+"";if(_(t))return Ce?Ce.call(t):"";var n=t+"";return"0"==n&&1/t==-je?"-0":n};var xe=function(e){return null==e?"":Ee(e)};var Se=function(e,t){return y(e)?e:j(e,t)?[e]:me(xe(e))};var ke=function(e){if("string"==typeof e||_(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var Me=function(e,t){for(var n=0,r=(t=Se(t,e)).length;null!=e&&n<r;)e=e[ke(t[n++])];return n&&n==r?e:void 0};var Pe=function(e,t,n){var r=null==e?void 0:Me(e,t);return void 0===r?n:r};var Re=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Te=function(e){return this.__data__.get(e)};var ze=function(e){return this.__data__.has(e)};var qe=function(e,t){var n=this.__data__;if(n instanceof ae){var r=n.__data__;if(!ue||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new de(r)}return n.set(e,t),this.size=n.size,this};function Fe(e){var t=this.__data__=new ae(e);this.size=t.size}Fe.prototype.clear=function(){this.__data__=new ae,this.size=0},Fe.prototype.delete=Re,Fe.prototype.get=Te,Fe.prototype.has=ze,Fe.prototype.set=qe;var Be=Fe;var Ne=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Ie=function(){try{var e=H(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var He=function(e,t,n){"__proto__"==t&&Ie?Ie(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ue=Object.prototype.hasOwnProperty;var Ve=function(e,t,n){var r=e[t];Ue.call(e,t)&&$(r,n)&&(void 0!==n||t in e)||He(e,t,n)};var Le=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var u=t[i],c=r?r(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),o?He(n,u,c):Ve(n,u,c)}return n};var De=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var We=function(e){return A(e)&&"[object Arguments]"==b(e)},Qe=Object.prototype,Xe=Qe.hasOwnProperty,Ge=Qe.propertyIsEnumerable,Je=We(function(){return arguments}())?We:function(e){return A(e)&&Xe.call(e,"callee")&&!Ge.call(e,"callee")};var Ye=function(){return!1},Ze=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?s.Buffer:void 0,i=(o?o.isBuffer:void 0)||Ye;e.exports=i}),$e=/^(?:0|[1-9]\d*)$/;var Ke=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&$e.test(e))&&-1<e&&e%1==0&&e<t};var et=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Arguments]"]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object Boolean]"]=tt["[object DataView]"]=tt["[object Date]"]=tt["[object Error]"]=tt["[object Function]"]=tt["[object Map]"]=tt["[object Number]"]=tt["[object Object]"]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object WeakMap]"]=!1;var nt=function(e){return A(e)&&et(e.length)&&!!tt[b(e)]};var rt=function(t){return function(e){return t(e)}},ot=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&u.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),it=ot&&ot.isTypedArray,at=it?rt(it):nt,ut=Object.prototype.hasOwnProperty;var ct=function(e,t){var n=y(e),r=!n&&Je(e),o=!n&&!r&&Ze(e),i=!n&&!r&&!o&&at(e),a=n||r||o||i,u=a?De(e.length,String):[],c=u.length;for(var s in e)!t&&!ut.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ke(s,c))||u.push(s);return u},st=Object.prototype;var pt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)};var lt=function(t,n){return function(e){return t(n(e))}},ft=lt(Object.keys,Object),vt=Object.prototype.hasOwnProperty;var ht=function(e){if(!pt(e))return ft(e);var t=[];for(var n in Object(e))vt.call(e,n)&&"constructor"!=n&&t.push(n);return t};var dt=function(e){return null!=e&&et(e.length)&&!E(e)};var gt=function(e){return dt(e)?ct(e):ht(e)};var yt=function(e,t){return e&&Le(t,gt(t),e)};var bt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},At=Object.prototype.hasOwnProperty;var _t=function(e){if(!O(e))return bt(e);var t=pt(e),n=[];for(var r in e)("constructor"!=r||!t&&At.call(e,r))&&n.push(r);return n};var mt=function(e){return dt(e)?ct(e,!0):_t(e)};var wt=function(e,t){return e&&Le(t,mt(t),e)},jt=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?s.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}});var Ot=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Ct=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var Et=function(){return[]},xt=Object.prototype.propertyIsEnumerable,St=Object.getOwnPropertySymbols,kt=St?function(t){return null==t?[]:(t=Object(t),Ct(St(t),function(e){return xt.call(t,e)}))}:Et;var Mt=function(e,t){return Le(e,kt(e),t)};var Pt=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},Rt=lt(Object.getPrototypeOf,Object),Tt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Pt(t,kt(e)),e=Rt(e);return t}:Et;var zt=function(e,t){return Le(e,Tt(e),t)};var qt=function(e,t,n){var r=t(e);return y(e)?r:Pt(r,n(e))};var Ft=function(e){return qt(e,gt,kt)};var Bt=function(e){return qt(e,mt,Tt)},Nt=H(s,"DataView"),It=H(s,"Promise"),Ht=H(s,"Set"),Ut=H(s,"WeakMap"),Vt="[object Map]",Lt="[object Promise]",Dt="[object Set]",Wt="[object WeakMap]",Qt="[object DataView]",Xt=P(Nt),Gt=P(ue),Jt=P(It),Yt=P(Ht),Zt=P(Ut),$t=b;(Nt&&$t(new Nt(new ArrayBuffer(1)))!=Qt||ue&&$t(new ue)!=Vt||It&&$t(It.resolve())!=Lt||Ht&&$t(new Ht)!=Dt||Ut&&$t(new Ut)!=Wt)&&($t=function(e){var t=b(e),n="[object Object]"==t?e.constructor:void 0,r=n?P(n):"";if(r)switch(r){case Xt:return Qt;case Gt:return Vt;case Jt:return Lt;case Yt:return Dt;case Zt:return Wt}return t});var Kt=$t,en=Object.prototype.hasOwnProperty;var tn=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&en.call(e,"index")&&(n.index=e.index,n.input=e.input),n},nn=s.Uint8Array;var rn=function(e){var t=new e.constructor(e.byteLength);return new nn(t).set(new nn(e)),t};var on=o?o.prototype:void 0;on&&on.valueOf;var an=function(e,t){var n=t?rn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var un=Object.create,cn=function(){function n(){}return function(e){if(!O(e))return{};if(un)return un(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();var sn=function(e){return"function"!=typeof e.constructor||pt(e)?{}:cn(Rt(e))};var pn=function(e){return A(e)&&"[object Map]"==Kt(e)},ln=ot&&ot.isMap,fn=ln?rt(ln):pn;var vn=function(e){return A(e)&&"[object Set]"==Kt(e)},hn=ot&&ot.isSet,dn=hn?rt(hn):vn,gn=1,yn=2,bn=4,An="[object Arguments]",_n="[object Function]",mn="[object GeneratorFunction]",wn="[object Object]";var jn=function n(r,o,i,e,t,a){var u,c=o&gn,s=o&yn,p=o&bn;if(i&&(u=t?i(r,e,t,a):i(r)),void 0!==u)return u;if(!O(r))return r;var l=y(r);if(l){if(u=tn(r),!c)return Ot(r,u)}else{var f=Kt(r),v=f==_n||f==mn;if(Ze(r))return jt(r,c);if(f!=wn&&f!=An&&(!v||t))return t?r:{};if(u=s||v?{}:sn(r),!c)return s?zt(r,wt(u,r)):Mt(r,yt(u,r))}a||(a=new Be);var h=a.get(r);if(h)return h;if(a.set(r,u),dn(r))return r.forEach(function(e){u.add(n(e,o,i,e,r,a))}),u;if(fn(r))return r.forEach(function(e,t){u.set(t,n(e,o,i,t,r,a))}),u;var d=p?s?Bt:Ft:s?keysIn:gt,g=l?void 0:d(r);return Ne(g||r,function(e,t){g&&(e=r[t=e]),Ve(u,t,n(e,o,i,t,r,a))}),u};var On=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var Cn=function(e,t,n){var r=-1,o=e.length;t<0&&(t=o<-t?0:o+t),(n=o<n?o:n)<0&&(n+=o),o=n<t?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};var En=function(e,t){return t.length<2?e:Me(e,Cn(t,0,-1))};var xn=function(e,t){return t=Se(t,e),null==(e=En(e,t))||delete e[ke(On(t))]},Sn=Function.prototype,kn=Object.prototype,Mn=Sn.toString,Pn=kn.hasOwnProperty,Rn=Mn.call(Object);var Tn=function(e){if(!A(e)||"[object Object]"!=b(e))return!1;var t=Rt(e);if(null===t)return!0;var n=Pn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Mn.call(n)==Rn};var zn=function(e){return Tn(e)?void 0:e},qn=o?o.isConcatSpreadable:void 0;var Fn=function(e){return y(e)||Je(e)||!!(qn&&e&&e[qn])};var Bn=function e(t,n,r,o,i){var a=-1,u=t.length;for(r||(r=Fn),i||(i=[]);++a<u;){var c=t[a];0<n&&r(c)?1<n?e(c,n-1,r,o,i):Pt(i,c):o||(i[i.length]=c)}return i};var Nn=function(e){return null!=e&&e.length?Bn(e,1):[]};var In=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Hn=Math.max;var Un=function(i,a,u){return a=Hn(void 0===a?i.length-1:a,0),function(){for(var e=arguments,t=-1,n=Hn(e.length-a,0),r=Array(n);++t<n;)r[t]=e[a+t];t=-1;for(var o=Array(a+1);++t<a;)o[t]=e[t];return o[a]=u(r),In(i,this,o)}};var Vn=function(e){return function(){return e}};var Ln=function(e){return e},Dn=Ie?function(e,t){return Ie(e,"toString",{configurable:!0,enumerable:!1,value:Vn(t),writable:!0})}:Ln,Wn=Date.now;var Qn=function(n){var r=0,o=0;return function(){var e=Wn(),t=16-(e-o);if(o=e,0<t){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}(Dn);Xn=function(t,e){var n={};if(null==t)return n;var r=!1;e=we(e,function(e){return e=Se(e,t),r||(r=1<e.length),e}),Le(t,Bt(t),n),r&&(n=jn(n,7,zn));for(var o=e.length;o--;)xn(n,e[o]);return n},Qn(Un(Xn,void 0,Nn),Xn+"");var Xn;var Gn=function(e,t,n){(void 0===n||$(e[t],n))&&(void 0!==n||t in e)||He(e,t,n)};var Jn=function(c){return function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var u=i[c?a:++r];if(!1===t(o[u],u,o))break}return e}}();var Yn=function(e){return A(e)&&dt(e)};var Zn=function(e,t){return"__proto__"==t?void 0:e[t]};var $n=function(e){return Le(e,mt(e))};var Kn=function(e,t,n,r,o,i,a){var u=Zn(e,n),c=Zn(t,n),s=a.get(c);if(s)Gn(e,n,s);else{var p=i?i(u,c,n+"",e,t,a):void 0,l=void 0===p;if(l){var f=y(c),v=!f&&Ze(c),h=!f&&!v&&at(c);p=c,f||v||h?p=y(u)?u:Yn(u)?Ot(u):v?jt(c,!(l=!1)):h?an(c,!(l=!1)):[]:Tn(c)||Je(c)?Je(p=u)?p=$n(u):(!O(u)||r&&E(u))&&(p=sn(c)):l=!1}l&&(a.set(c,p),o(p,c,r,i,a),a.delete(c)),Gn(e,n,p)}};var er=function r(o,i,a,u,c){o!==i&&Jn(i,function(e,t){if(O(e))c||(c=new Be),Kn(o,i,t,a,r,u,c);else{var n=u?u(Zn(o,t),e,t+"",o,i,c):void 0;void 0===n&&(n=e),Gn(o,t,n)}},mt)};var tr=function(e,t){return Qn(Un(e,t,Ln),e+"")};var nr=function(e,t,n){if(!O(n))return!1;var r=typeof t;return!!("number"==r?dt(n)&&Ke(t,n.length):"string"==r&&t in n)&&$(n[t],e)};var rr=function(u){return tr(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0;for(o=3<u.length&&"function"==typeof o?(r--,o):void 0,i&&nr(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&u(e,a,n,o)}return e})},or=(rr(function(e,t,n){er(e,t,n)}),rr(function(e,t,n,r){er(e,t,n,r)})),ir=Object.prototype.hasOwnProperty,ar=(rr(function(e,t){if(pt(t)||dt(t))Le(t,gt(t),e);else for(var n in t)ir.call(t,n)&&Ve(e,n,t[n])}),function(n){return function(e){var t=e.configMap;return Pe(Pe(t,n),"value",Pe(t,n+".defaultValue"))}}),ur=function(n){return function(e){var t=e.configMap;return Pe(t,n+".type")}},cr=function(n){return function(e){var t=e.configMap;return Pe(t,n+".max")}},sr=function(n){return function(e){var t=e.configMap;return Pe(t,n+".min")}},pr=function(n){return function(e){var t=e.configMap;return Pe(Pe(t,n),"title",Pe(t,n+".__title__"))}},lr=function(){return window.self!==window.top},fr=c.createContext(),vr=fr.Provider,hr=fr.Consumer,dr="__ACTOSERVICE__ACTION__",gr="AS:sdk:change_edit",yr="AS:sdk:update_config",br=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ar=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},mr=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},wr=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},jr=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Or=require("prop-types"),Cr=function(e){function n(e){br(this,n);var t=wr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={configMap:window.__ACTOSERVICE__SCHEME__,isEditing:e.editing||lr()},window.__ACTOSERVICE__SCHEME__=null,t.updateConfig=t.updateConfig.bind(t),t}return mr(n,e),Ar(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.scheme;this.injectCSS(),lr()&&this._registerListener(),this.props.scheme||this.state.configMap?this.state.configMap||(O(e)&&this.setState({configMap:e}),"string"==typeof e&&fetch(e).then(function(e){return e.json()}).then(function(e){return t.setState({configMap:e})}).catch(function(e){return console.error("Cant find configMap")})):console.error("Scheme is not specified")}},{key:"injectCSS",value:function(){var e=document.createElement("style");e.innerHTML="\n  @-webkit-keyframes pulse {\n    0% {\n      -webkit-box-shadow: 0 0 0 0 rgba(204,169,44, 0.4);\n    }\n    70% {\n        -webkit-box-shadow: 0 0 0 10px rgba(204,169,44, 0);\n    }\n    100% {\n        -webkit-box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n    }\n  }\n  @keyframes pulse {\n    0% {\n      -moz-box-shadow: 0 0 0 0 #0a6c8f;\n      box-shadow: 0 0 0 0 #0a6c8f;\n    }\n    70% {\n        -moz-box-shadow: 0 0 0 10px rgba(204,169,44, 0);\n        box-shadow: 0 0 0 10px rgba(204,169,44, 0);\n    }\n    100% {\n        -moz-box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n        box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n    }\n  }\n  .body {\n    padding: 0;\n    margin: 0;\n  }\n  .as-action-hint {\n    z-index: 9999;\n    animation: pulse 2s infinite;\n  }\n  .Popover {\n    z-index: 22;\n  }\n  .Popover-body {\n    display: inline-flex;\n    flex-direction: column;\n    padding: 2rem 4rem;\n    background: hsl(0, 0%, 27%);\n    color: white;\n    border-radius: 0.3rem;\n  }\n  \n  .Popover-tipShape {\n    fill: hsl(0, 0%, 27%);\n  }\n  .Target {\n    -webkit-user-select: none;\n    position: relative;\n    display: inline-block;\n    color: hsla(0, 0%, 0%, 0.45);\n    color: white;\n    white-space: pre-wrap;\n    text-align: center;\n    text-transform: uppercase;\n    border-radius: 0.2rem;\n    overflow: hidden;\n  }\n  \n  .Target-Move {\n    padding: 1rem;\n    cursor: move;\n    border-bottom: 1px solid white;\n    background: hsl(173, 69%, 48%);\n  }\n  \n  .Target-Toggle {\n    display: block;\n    padding: 1rem;\n    cursor: pointer;\n    background: hsl(346, 62%, 55%);\n  }\n  .Target.is-open .Target-Toggle {\n    background: hsl(346, 80%, 50%);\n  }\n",document.head.appendChild(e)}},{key:"_isASAction",value:function(e){var t=Pe(e,dr);return!!t&&[gr,yr].includes(t)}},{key:"_registerListener",value:function(){var r=this;window.onmessage=function(e){var t=e.origin,n=e.data;if(console.log("message received",t,n),r._isASAction(n))switch(Pe(n,dr)){case gr:r.setState({editing:Pe(n,"payload")});break;case yr:r.updateConfig(Pe(n,"payload"));break;default:console.warn("Wrong action received",n)}}}},{key:"updateConfig",value:function(t){var n=this,e=or(this.state.configMap,t,function(e,t){return Array.isArray(t)?t:void 0});this.setState({configMap:e},function(){var e;"parent"in window&&parent.postMessage((_r(e={},dr,"AS:sdk:notify_updates"),_r(e,"payload",{updates:t,result:n.state.configMap}),e),"*")})}},{key:"render",value:function(){var e=this.state,t=e.configMap,n=e.isEditing,r=this.props.children;return c.createElement(vr,{value:{configMap:t,isEditing:n,updateConfig:this.updateConfig}},c.Children.only(r))}}]),n}(c.Component);Cr.propTypes={editing:Or.bool,scheme:Or.oneOfType([Or.string,Or.object]).isRequired};var Er=function(e,t,n,r){if(!O(e))return e;for(var o=-1,i=(t=Se(t,e)).length,a=i-1,u=e;null!=u&&++o<i;){var c=ke(t[o]),s=n;if(o!=a){var p=u[c];void 0===(s=r?r(p,c,u):void 0)&&(s=O(p)?p:Ke(t[o+1])?[]:{})}Ve(u,c,s),u=u[c]}return e};var xr=function(e,t,n){return null==e?e:Er(e,t,n)},Sr=Object.prototype.hasOwnProperty;var kr=function(e){if(null==e)return!0;if(dt(e)&&(y(e)||"string"==typeof e||"function"==typeof e.splice||Ze(e)||at(e)||Je(e)))return!e.length;var t=Kt(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(pt(e))return!ht(e).length;for(var n in e)if(Sr.call(e,n))return!1;return!0},Mr=require("prop-types");function Pr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{value:n,onChange:r}))}Pr.propTypes={title:Mr.string,value:Mr.string,onChange:Mr.func.isRequired};var Rr=new Image;Rr.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAFDmAABQ5gFtNX1WAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAD9QTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxQXeHgAAABR0Uk5TAAwREi1DSGKdpayvsba/w87j5ugHttgJAAACCElEQVR42u2b23KCQBBER24iJAik//9b8xAtRRe5bU9XpZZXrTmnlMvsMm32OMpmGNvKqMf5+2doyuBHpxoAgEvGw2dff4z6FOBfcTv6nMXP+zvjeprn8wwe/HeDZz7L4Jn/ajDlcwym/KnBK59h8Mp/Nnjnxzd45z8MQvzYBiH+3SDMj2sQ5t8MaoBtMMcHarMSYBvM84HSGrANPvHR2ACywUc+BhvBNfjMx2gtqAYLfLRWgWmwxEdldiEaLPIvZpb1NINFfp+t+1rO4ucbv0jikww2FSUYbCwZ3WBzwcgGO8pFNdhVLKLBzlLRDHYXimRwoEwUg0NFIhgcLHHYQF1A/ROqTyL1ZaS+kahvpeqHifpxqm4o1C2VuqlUt9XqhUWuXFoVZgWPv8IAXQcif40Bl3/cgL7FQucfM3DYZnPg7zfw2Gr14e8z8Nhu9+NvN/B45eLL32bg8drNn7/ewOPVq4ZvVqwRKIx4dMv8zv6zgPovUJ+E6stQfSNS34rVDyP141jdkKhbMnVTqm7L1QsT9dJMvThVL8/VGxTqLRr1JpV6my7NH6T5gzR/kOYP0vxBmj9I8wdp/iDNH6T5gzR/kOYPvBYW8tFu9XC7fLxfHnCQRzzkIRd5zEcedJJHvfRhN3ncTx941Ec+9aFXfexXH3zWR7+dwu+35iMUfjef+H/VjtP4/y87VybSF5FlxgAAAABJRU5ErkJggg==";var Tr=require("prop-types"),zr=function(e){function n(e){br(this,n);var t=wr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.fileInputRef=c.createRef(),t.onChange=t.onChange.bind(t),t.onSelect=t.onSelect.bind(t),t.renderTiles=t.renderTiles.bind(t),t.remove=t.remove.bind(t),t}return mr(n,e),Ar(n,[{key:"onChange",value:function(e){var t=this,n=this.props.array,r=new FileReader;r.onload=function(e){return t.props.onChange({target:{value:n?[].concat(jr(t.props.value),[r.result]):r.result}})},r.readAsDataURL(e.target.files[0])}},{key:"remove",value:function(e){var t=[].concat(jr(this.props.value));t.splice(e,1),this.props.onChange({target:{value:t}})}},{key:"renderTiles",value:function(){var n=this,e=this.props.value;return c.createElement(c.Fragment,null,e.map(function(e,t){return c.createElement("div",{key:t,style:{backgroundSize:"cover",backgroundPosition:"center center",backgroundImage:"url("+e+")",backgroundRepeat:"no-repeat",display:"inline-block",width:"100px",height:"100px",position:"relative",marginRight:"10px"}},c.createElement("img",{src:Rr.src,onClick:function(){return n.remove(t)},style:{cursor:"pointer",position:"absolute",width:"20px",height:"20px",padding:"5px",backgroundColor:"white",borderRadius:20,top:-10,right:-10}}))}))}},{key:"onSelect",value:function(){this.fileInputRef.current.click()}},{key:"render",value:function(){var e=this.props,t=e.title,n=(e.value,e.array);return c.createElement("div",null,c.createElement("span",null,t),c.createElement("button",{onClick:this.onSelect},"Select File"),c.createElement("input",{ref:this.fileInputRef,style:{display:"none"},type:"file",name:"",multiple:!1,accept:"image/x-png,image/gif,image/jpeg",onChange:this.onChange}),n&&this.renderTiles())}}]),n}(c.Component);zr.propTypes={array:Tr.bool,title:Tr.string,value:Tr.oneOfType([Tr.string,Tr.arrayOf(Tr.string)]),onChange:Tr.func.isRequired};var qr=require("prop-types");function Fr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{type:"color",value:n,onChange:r}))}Fr.propTypes={title:qr.string,value:qr.string,onChange:qr.func.isRequired};var Br=require("prop-types");function Nr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{type:"number",value:n,onChange:r}))}Nr.propTypes={title:Br.string,value:Br.string,onChange:Br.func.isRequired};var Ir=require("prop-types");function Hr(e){var t=e.title,n=e.value,r=e.onChange;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{type:"phone",value:n,onChange:r}))}Hr.propTypes={title:Ir.string,value:Ir.string,onChange:Ir.func.isRequired};var Ur=require("prop-types"),Vr=function(e){function n(e){br(this,n);var t=wr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onChange=t.onChange.bind(t),t}return mr(n,e),Ar(n,[{key:"onChange",value:function(e){this.props.onChange({target:{value:!Boolean(this.props.value)}})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.value;return c.createElement("div",null,c.createElement("span",null,t),c.createElement("input",{type:"checkbox",onChange:this.onChange,checked:n}))}}]),n}(c.Component);Vr.propTypes={title:Ur.string,value:Ur.string,onChange:Ur.func.isRequired};var Lr,Dr="AS:string",Wr="AS:number",Qr="AS:color",Xr="AS:phone",Gr="AS:image",Jr="AS:bool",Yr="AS:array:image",Zr="AS:array:string",$r="AS:array:number",Kr=[Dr,Wr,Qr,Xr,Gr,Jr,Yr,Zr,$r],eo=require("prop-types"),to=(_r(Lr={},Qr,{component:Fr}),_r(Lr,Dr,{component:Pr}),_r(Lr,Gr,{component:zr}),_r(Lr,Wr,{component:Nr}),_r(Lr,Xr,{component:Hr}),_r(Lr,Jr,{component:Vr}),_r(Lr,Yr,{component:zr,props:{array:!0}}),_r(Lr,$r,{component:Nr,props:{array:!0}}),_r(Lr,Zr,{component:Pr,props:{array:!0}}),Lr),no=function(e){function n(e){br(this,n);var t=wr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onChange=t.onChange.bind(t),t}return mr(n,e),Ar(n,[{key:"onChange",value:function(e){console.log(e.target.value),this.props.onChange(this.props.path,e.target.value)}},{key:"render",value:function(){var e=this.props.type,t={title:this.props.title,value:this.props.value,onChange:this.onChange},n=to[e];if(!n)throw new Error("Wrong action type: "+e);var r=n.props,o=n.component;return Object.assign(t,r),c.createElement(o,t)}}]),n}(c.PureComponent);no.propTypes={path:eo.string.isRequired,type:eo.oneOf(Kr),value:eo.any,title:eo.string,onChange:eo.func.isRequired};var ro=require("prop-types"),oo=require("react-popover"),io=function(e){function n(e){br(this,n);var t=wr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={openAction:!1},t.openAction=t.openAction.bind(t),t.closeActions=t.closeActions.bind(t),t.generateComponentAction=t.generateComponentAction.bind(t),t.handleChange=t.handleChange.bind(t),t}return mr(n,e),Ar(n,[{key:"openAction",value:function(e){e.preventDefault(),kr(n.lastOpenPopover)||n.lastOpenPopover===this||n.lastOpenPopover.closeActions(),(n.lastOpenPopover=this).setState({openAction:!0})}},{key:"closeActions",value:function(){this.setState({openAction:!1})}},{key:"handleChange",value:function(e,t){var n={};xr(n,e+".value",t),this.props.actoservice.updateConfig(n)}},{key:"generateComponentAction",value:function(){var t=this,e=this.props.actoservice,n=e.paths,r=e.scheme;return n.map(function(e){return c.createElement(no,{key:e,path:e,max:cr(e)({configMap:r}),min:sr(e)({configMap:r}),title:pr(e)({configMap:r}),onChange:t.handleChange,type:ur(e)({configMap:r}),value:ar(e)({configMap:r})})})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.wrapper,r=this.props.actoservice,o=a.cloneElement(this.props.children,{actoservice:{scheme:r.scheme}});if(!r.isEditing)return o;var i=n?c.createElement("div",{className:Pe(t,"innerContainer","")},o):o;return c.createElement("div",{className:"as-action-cntr "+Pe(t,"container",""),onMouseOver:this.openAction,style:{position:"relative",transition:"200ms box-shadow",boxShadow:this.state.openAction?"2px 2px 36px -1px rgba(0,0,0,0.75)":"none"}},c.createElement("div",{className:"as-action-hint "+Pe(t,"hint",""),style:{position:"absolute",top:-10,right:-10,width:20,height:20,borderRadius:10,backgroundColor:"#0a6c8f",opacity:this.state.openAction?0:1,transition:"200ms opacity",boxShadow:"2px 2px 36px -1px rgba(0,0,0,0.75)"}}),c.createElement(oo,{preferPlace:"below",isOpen:this.state.openAction,body:this.generateComponentAction(),onOuterAction:this.closeActions,enterExitTransitionDurationMs:100},i))}}]),n}(c.PureComponent);io.lastOpenPopover=null,io.propTypes={wrapper:ro.bool,classes:ro.shape({container:ro.string,hint:ro.string}),actoservice:ro.shape({paths:ro.arrayOf(ro.string).isRequired,schemes:ro.object,updateConfig:ro.func.isRequired,isEditing:ro.bool.isRequired}).isRequired};var ao=function(e){return this.__data__.has(e)};function uo(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new de;++t<n;)this.add(e[t])}uo.prototype.add=uo.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},uo.prototype.has=ao;var co=uo;var so=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1};var po=function(e){return e!=e};var lo=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1};var fo=function(e,t,n){return t==t?lo(e,t,n):so(e,po,n)};var vo=function(e,t){return!(null==e||!e.length)&&-1<fo(e,t,0)};var ho=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1};var go=function(e,t){return e.has(t)};var yo=function(){};var bo=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},Ao=Ht&&1/bo(new Ht([,-0]))[1]==1/0?function(e){return new Ht(e)}:yo;var _o=function(e,t,n){var r=-1,o=vo,i=e.length,a=!0,u=[],c=u;if(n)a=!1,o=ho;else if(200<=i){var s=t?null:Ao(e);if(s)return bo(s);a=!1,o=go,c=new co}else c=t?[]:u;e:for(;++r<i;){var p=e[r],l=t?t(p):p;if(p=n||0!==p?p:0,a&&l==l){for(var f=c.length;f--;)if(c[f]===l)continue e;t&&c.push(l),u.push(p)}else o(c,l,n)||(c!==u&&c.push(l),u.push(p))}return u};var mo=function(e){return e&&e.length?_o(e):[]};e.default=Cr,e.withBind=function(u){return function(a){var e=a.displayName||a.name||"Unknown";u.length!==mo(u).length&&console.warn("\n        You're trying to get Actoservice value multiple times,\n        Please restructure this to get it once in component: "+e+"\n      ");var t=function(e){function t(){return br(this,t),wr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return mr(t,e),Ar(t,[{key:"render",value:function(){var i=this;return c.createElement(hr,null,function(e){var t=e.configMap,n=e.isEditing,r=e.updateConfig,o={};return u.forEach(function(e){xr(o,e+".value",ar(e)({configMap:t})),xr(o,e+".title",pr(e)({configMap:t})),xr(o,e+".type",ur(e)({configMap:t})),xr(o,e+".max",cr(e)({configMap:t})),xr(o,e+".min",sr(e)({configMap:t}))}),c.createElement(io,{classes:i.props.classes,wrapper:i.props.wrapper,actoservice:{paths:u,scheme:o,updateConfig:r,isEditing:n}},c.createElement(a,i.props))})}}]),t}(c.Component);return t.displayName="withBind ["+e+"]",t}},e.bindValue=function(e){return c.createElement(hr,null,ar(e))},e.Types=Kr,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=actoservice.js.map
