!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t["actoservice-sdk"]={},t.React)}(this,function(t,r){"use strict";var c="default"in r?r.default:r,g=Array.isArray,e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},f=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},u="object"==o(e)&&e&&e.Object===Object&&e,p="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,v=u||p||Function("return this")(),d=v.Symbol,h=Object.prototype,y=h.hasOwnProperty,b=h.toString,_=d?d.toStringTag:void 0;var j=function(t){var e=y.call(t,_),n=t[_];try{t[_]=void 0}catch(t){}var r=b.call(t);return e?t[_]=n:delete t[_],r},m=Object.prototype.toString;var O=function(t){return m.call(t)},w=d?d.toStringTag:void 0;var A=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":w&&w in Object(t)?j(t):O(t)};var C=function(t){return null!=t&&"object"==(void 0===t?"undefined":o(t))};var S=function(t){return"symbol"==(void 0===t?"undefined":o(t))||C(t)&&"[object Symbol]"==A(t)},E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;var P=function(t,e){if(g(t))return!1;var n=void 0===t?"undefined":o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!S(t))||k.test(t)||!E.test(t)||null!=e&&t in Object(e)};var T=function(t){var e=void 0===t?"undefined":o(t);return null!=t&&("object"==e||"function"==e)};var M,x=function(t){if(!T(t))return!1;var e=A(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},z=v["__core-js_shared__"],q=(M=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"";var R=function(t){return!!q&&q in t},F=Function.prototype.toString;var I=function(t){if(null!=t){try{return F.call(t)}catch(t){}try{return t+""}catch(t){}}return""},$=/^\[object .+?Constructor\]$/,V=Function.prototype,B=Object.prototype,D=V.toString,U=B.hasOwnProperty,L=RegExp("^"+D.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var N=function(t){return!(!T(t)||R(t))&&(x(t)?L:$).test(I(t))};var W=function(t,e){return null==t?void 0:t[e]};var H=function(t,e){var n=W(t,e);return N(n)?n:void 0},G=H(Object,"create");var J=function(){this.__data__=G?G(null):{},this.size=0};var K=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Q=Object.prototype.hasOwnProperty;var X=function(t){var e=this.__data__;if(G){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Q.call(e,t)?e[t]:void 0},Y=Object.prototype.hasOwnProperty;var Z=function(t){var e=this.__data__;return G?void 0!==e[t]:Y.call(e,t)};var tt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=G&&void 0===e?"__lodash_hash_undefined__":e,this};function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}et.prototype.clear=J,et.prototype.delete=K,et.prototype.get=X,et.prototype.has=Z,et.prototype.set=tt;var nt=et;var rt=function(){this.__data__=[],this.size=0};var ot=function(t,e){return t===e||t!=t&&e!=e};var it=function(t,e){for(var n=t.length;n--;)if(ot(t[n][0],e))return n;return-1},at=Array.prototype.splice;var ut=function(t){var e=this.__data__,n=it(e,t);return!(n<0||(n==e.length-1?e.pop():at.call(e,n,1),--this.size,0))};var ct=function(t){var e=this.__data__,n=it(e,t);return n<0?void 0:e[n][1]};var st=function(t){return-1<it(this.__data__,t)};var ft=function(t,e){var n=this.__data__,r=it(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function lt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lt.prototype.clear=rt,lt.prototype.delete=ut,lt.prototype.get=ct,lt.prototype.has=st,lt.prototype.set=ft;var pt=lt,vt=H(v,"Map");var dt=function(t){var e=void 0===t?"undefined":o(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ht=function(t,e){var n=t.__data__;return dt(e)?n["string"==typeof e?"string":"hash"]:n.map};var yt=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e};var gt=function(t){return ht(this,t).get(t)};var bt=function(t){return ht(this,t).has(t)};var _t=function(t,e){var n=ht(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function jt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jt.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(vt||pt),string:new nt}},jt.prototype.delete=yt,jt.prototype.get=gt,jt.prototype.has=bt,jt.prototype.set=_t;var mt=jt,Ot="Expected a function";function wt(i,a){if("function"!=typeof i||null!=a&&"function"!=typeof a)throw new TypeError(Ot);var t=function t(){var e=arguments,n=a?a.apply(this,e):e[0],r=t.cache;if(r.has(n))return r.get(n);var o=i.apply(this,e);return t.cache=r.set(n,o)||r,o};return t.cache=new(wt.Cache||mt),t}wt.Cache=mt;var At=wt;var Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/\\(\\)?/g,Et=function(t){var e=At(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(Ct,function(t,e,n,r){o.push(n?r.replace(St,"$1"):e||t)}),o});var kt=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o},Pt=1/0,Tt=d?d.prototype:void 0,Mt=Tt?Tt.toString:void 0;var xt=function t(e){if("string"==typeof e)return e;if(g(e))return kt(e,t)+"";if(S(e))return Mt?Mt.call(e):"";var n=e+"";return"0"==n&&1/e==-Pt?"-0":n};var zt=function(t){return null==t?"":xt(t)};var qt=function(t,e){return g(t)?t:P(t,e)?[t]:Et(zt(t))};var Rt=function(t){if("string"==typeof t||S(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var Ft=function(t,e){for(var n=0,r=(e=qt(e,t)).length;null!=t&&n<r;)t=t[Rt(e[n++])];return n&&n==r?t:void 0};var It=function(t,e,n){var r=null==t?void 0:Ft(t,e);return void 0===r?n:r};var $t=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Vt=function(t){return this.__data__.get(t)};var Bt=function(t){return this.__data__.has(t)};var Dt=function(t,e){var n=this.__data__;if(n instanceof pt){var r=n.__data__;if(!vt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mt(r)}return n.set(t,e),this.size=n.size,this};function Ut(t){var e=this.__data__=new pt(t);this.size=e.size}Ut.prototype.clear=function(){this.__data__=new pt,this.size=0},Ut.prototype.delete=$t,Ut.prototype.get=Vt,Ut.prototype.has=Bt,Ut.prototype.set=Dt;var Lt=Ut;var Nt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Wt=function(){try{var t=H(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Ht=function(t,e,n){"__proto__"==e&&Wt?Wt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Gt=Object.prototype.hasOwnProperty;var Jt=function(t,e,n){var r=t[e];Gt.call(t,e)&&ot(r,n)&&(void 0!==n||e in t)||Ht(t,e,n)};var Kt=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=r?r(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),o?Ht(n,u,c):Jt(n,u,c)}return n};var Qt=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var Xt=function(t){return C(t)&&"[object Arguments]"==A(t)},Yt=Object.prototype,Zt=Yt.hasOwnProperty,te=Yt.propertyIsEnumerable,ee=Xt(function(){return arguments}())?Xt:function(t){return C(t)&&Zt.call(t,"callee")&&!te.call(t,"callee")};var ne=function(){return!1},re=n(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?v.Buffer:void 0,i=(o?o.isBuffer:void 0)||ne;t.exports=i}),oe=/^(?:0|[1-9]\d*)$/;var ie=function(t,e){var n=void 0===t?"undefined":o(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&oe.test(t))&&-1<t&&t%1==0&&t<e};var ae=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},ue={};ue["[object Float32Array]"]=ue["[object Float64Array]"]=ue["[object Int8Array]"]=ue["[object Int16Array]"]=ue["[object Int32Array]"]=ue["[object Uint8Array]"]=ue["[object Uint8ClampedArray]"]=ue["[object Uint16Array]"]=ue["[object Uint32Array]"]=!0,ue["[object Arguments]"]=ue["[object Array]"]=ue["[object ArrayBuffer]"]=ue["[object Boolean]"]=ue["[object DataView]"]=ue["[object Date]"]=ue["[object Error]"]=ue["[object Function]"]=ue["[object Map]"]=ue["[object Number]"]=ue["[object Object]"]=ue["[object RegExp]"]=ue["[object Set]"]=ue["[object String]"]=ue["[object WeakMap]"]=!1;var ce=function(t){return C(t)&&ae(t.length)&&!!ue[A(t)]};var se=function(e){return function(t){return e(t)}},fe=n(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n&&u.process,i=function(){try{var t=r&&r.require&&r.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),le=fe&&fe.isTypedArray,pe=le?se(le):ce,ve=Object.prototype.hasOwnProperty;var de=function(t,e){var n=g(t),r=!n&&ee(t),o=!n&&!r&&re(t),i=!n&&!r&&!o&&pe(t),a=n||r||o||i,u=a?Qt(t.length,String):[],c=u.length;for(var s in t)!e&&!ve.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ie(s,c))||u.push(s);return u},he=Object.prototype;var ye=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||he)};var ge=function(e,n){return function(t){return e(n(t))}},be=ge(Object.keys,Object),_e=Object.prototype.hasOwnProperty;var je=function(t){if(!ye(t))return be(t);var e=[];for(var n in Object(t))_e.call(t,n)&&"constructor"!=n&&e.push(n);return e};var me=function(t){return null!=t&&ae(t.length)&&!x(t)};var Oe=function(t){return me(t)?de(t):je(t)};var we=function(t,e){return t&&Kt(e,Oe(e),t)};var Ae=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Ce=Object.prototype.hasOwnProperty;var Se=function(t){if(!T(t))return Ae(t);var e=ye(t),n=[];for(var r in t)("constructor"!=r||!e&&Ce.call(t,r))&&n.push(r);return n};var Ee=function(t){return me(t)?de(t,!0):Se(t)};var ke=function(t,e){return t&&Kt(e,Ee(e),t)},Pe=n(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?v.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=i?i(n):new t.constructor(n);return t.copy(r),r}});var Te=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var Me=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i};var xe=function(){return[]},ze=Object.prototype.propertyIsEnumerable,qe=Object.getOwnPropertySymbols,Re=qe?function(e){return null==e?[]:(e=Object(e),Me(qe(e),function(t){return ze.call(e,t)}))}:xe;var Fe=function(t,e){return Kt(t,Re(t),e)};var Ie=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},$e=ge(Object.getPrototypeOf,Object),Ve=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ie(e,Re(t)),t=$e(t);return e}:xe;var Be=function(t,e){return Kt(t,Ve(t),e)};var De=function(t,e,n){var r=e(t);return g(t)?r:Ie(r,n(t))};var Ue=function(t){return De(t,Oe,Re)};var Le=function(t){return De(t,Ee,Ve)},Ne=H(v,"DataView"),We=H(v,"Promise"),He=H(v,"Set"),Ge=H(v,"WeakMap"),Je="[object Map]",Ke="[object Promise]",Qe="[object Set]",Xe="[object WeakMap]",Ye="[object DataView]",Ze=I(Ne),tn=I(vt),en=I(We),nn=I(He),rn=I(Ge),on=A;(Ne&&on(new Ne(new ArrayBuffer(1)))!=Ye||vt&&on(new vt)!=Je||We&&on(We.resolve())!=Ke||He&&on(new He)!=Qe||Ge&&on(new Ge)!=Xe)&&(on=function(t){var e=A(t),n="[object Object]"==e?t.constructor:void 0,r=n?I(n):"";if(r)switch(r){case Ze:return Ye;case tn:return Je;case en:return Ke;case nn:return Qe;case rn:return Xe}return e});var an=on,un=Object.prototype.hasOwnProperty;var cn=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&un.call(t,"index")&&(n.index=t.index,n.input=t.input),n},sn=v.Uint8Array;var fn=function(t){var e=new t.constructor(t.byteLength);return new sn(e).set(new sn(t)),e};var ln=d?d.prototype:void 0;ln&&ln.valueOf;var pn=function(t,e){var n=e?fn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var vn=Object.create,dn=function(){function n(){}return function(t){if(!T(t))return{};if(vn)return vn(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();var hn=function(t){return"function"!=typeof t.constructor||ye(t)?{}:dn($e(t))};var yn=function(t){return C(t)&&"[object Map]"==an(t)},gn=fe&&fe.isMap,bn=gn?se(gn):yn;var _n=function(t){return C(t)&&"[object Set]"==an(t)},jn=fe&&fe.isSet,mn=jn?se(jn):_n,On=1,wn=2,An=4,Cn="[object Arguments]",Sn="[object Function]",En="[object GeneratorFunction]",kn="[object Object]";var Pn=function n(r,o,i,t,e,a){var u,c=o&On,s=o&wn,f=o&An;if(i&&(u=e?i(r,t,e,a):i(r)),void 0!==u)return u;if(!T(r))return r;var l=g(r);if(l){if(u=cn(r),!c)return Te(r,u)}else{var p=an(r),v=p==Sn||p==En;if(re(r))return Pe(r,c);if(p!=kn&&p!=Cn&&(!v||e))return e?r:{};if(u=s||v?{}:hn(r),!c)return s?Be(r,ke(u,r)):Fe(r,we(u,r))}a||(a=new Lt);var d=a.get(r);if(d)return d;if(a.set(r,u),mn(r))return r.forEach(function(t){u.add(n(t,o,i,t,r,a))}),u;if(bn(r))return r.forEach(function(t,e){u.set(e,n(t,o,i,e,r,a))}),u;var h=f?s?Le:Ue:s?keysIn:Oe,y=l?void 0:h(r);return Nt(y||r,function(t,e){y&&(t=r[e=t]),Jt(u,e,n(t,o,i,e,r,a))}),u};var Tn=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var Mn=function(t,e,n){var r=-1,o=t.length;e<0&&(e=o<-e?0:o+e),(n=o<n?o:n)<0&&(n+=o),o=n<e?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i};var xn=function(t,e){return e.length<2?t:Ft(t,Mn(e,0,-1))};var zn=function(t,e){return e=qt(e,t),null==(t=xn(t,e))||delete t[Rt(Tn(e))]},qn=Function.prototype,Rn=Object.prototype,Fn=qn.toString,In=Rn.hasOwnProperty,$n=Fn.call(Object);var Vn=function(t){if(!C(t)||"[object Object]"!=A(t))return!1;var e=$e(t);if(null===e)return!0;var n=In.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Fn.call(n)==$n};var Bn=function(t){return Vn(t)?void 0:t},Dn=d?d.isConcatSpreadable:void 0;var Un=function(t){return g(t)||ee(t)||!!(Dn&&t&&t[Dn])};var Ln=function t(e,n,r,o,i){var a=-1,u=e.length;for(r||(r=Un),i||(i=[]);++a<u;){var c=e[a];0<n&&r(c)?1<n?t(c,n-1,r,o,i):Ie(i,c):o||(i[i.length]=c)}return i};var Nn=function(t){return null!=t&&t.length?Ln(t,1):[]};var Wn=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Hn=Math.max;var Gn=function(i,a,u){return a=Hn(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,n=Hn(t.length-a,0),r=Array(n);++e<n;)r[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=u(r),Wn(i,this,o)}};var Jn=function(t){return function(){return t}};var Kn=function(t){return t},Qn=Wt?function(t,e){return Wt(t,"toString",{configurable:!0,enumerable:!1,value:Jn(e),writable:!0})}:Kn,Xn=Date.now;var Yn=function(n){var r=0,o=0;return function(){var t=Xn(),e=16-(t-o);if(o=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}(Qn);Zn=function(e,t){var n={};if(null==e)return n;var r=!1;t=kt(t,function(t){return t=qt(t,e),r||(r=1<t.length),t}),Kt(e,Le(e),n),r&&(n=Pn(n,7,Bn));for(var o=t.length;o--;)zn(n,t[o]);return n},Yn(Gn(Zn,void 0,Nn),Zn+"");var Zn;var tr=function(t,e,n){(void 0===n||ot(t[e],n))&&(void 0!==n||e in t)||Ht(t,e,n)};var er=function(c){return function(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var u=i[c?a:++r];if(!1===e(o[u],u,o))break}return t}}();var nr=function(t){return C(t)&&me(t)};var rr=function(t,e){return"__proto__"==e?void 0:t[e]};var or=function(t){return Kt(t,Ee(t))};var ir=function(t,e,n,r,o,i,a){var u=rr(t,n),c=rr(e,n),s=a.get(c);if(s)tr(t,n,s);else{var f=i?i(u,c,n+"",t,e,a):void 0,l=void 0===f;if(l){var p=g(c),v=!p&&re(c),d=!p&&!v&&pe(c);f=c,p||v||d?f=g(u)?u:nr(u)?Te(u):v?Pe(c,!(l=!1)):d?pn(c,!(l=!1)):[]:Vn(c)||ee(c)?ee(f=u)?f=or(u):(!T(u)||r&&x(u))&&(f=hn(c)):l=!1}l&&(a.set(c,f),o(f,c,r,i,a),a.delete(c)),tr(t,n,f)}};var ar=function r(o,i,a,u,c){o!==i&&er(i,function(t,e){if(T(t))c||(c=new Lt),ir(o,i,e,a,r,u,c);else{var n=u?u(rr(o,e),t,e+"",o,i,c):void 0;void 0===n&&(n=t),tr(o,e,n)}},Ee)};var ur=function(t,e){return Yn(Gn(t,e,Kn),t+"")};var cr=function(t,e,n){if(!T(n))return!1;var r=void 0===e?"undefined":o(e);return!!("number"==r?me(n)&&ie(e,n.length):"string"==r&&e in n)&&ot(n[e],t)};var sr=function(u){return ur(function(t,e){var n=-1,r=e.length,o=1<r?e[r-1]:void 0,i=2<r?e[2]:void 0;for(o=3<u.length&&"function"==typeof o?(r--,o):void 0,i&&cr(e[0],e[1],i)&&(o=r<3?void 0:o,r=1),t=Object(t);++n<r;){var a=e[n];a&&u(t,a,n,o)}return t})},fr=sr(function(t,e,n){ar(t,e,n)}),lr=Object.prototype.hasOwnProperty,pr=(sr(function(t,e){if(ye(e)||me(e))Kt(e,Oe(e),t);else for(var n in e)lr.call(e,n)&&Jt(t,n,e[n])}),function(n){return function(t){var e=t.configMap;return It(It(e,n),"defaultValue",It(e,n))}}),vr=function(){return window.self!==window.top};var dr=function(t,e,n,r){if(!T(t))return t;for(var o=-1,i=(e=qt(e,t)).length,a=i-1,u=t;null!=u&&++o<i;){var c=Rt(e[o]),s=n;if(o!=a){var f=u[c];void 0===(s=r?r(f,c,u):void 0)&&(s=T(f)?f:ie(e[o+1])?[]:{})}Jt(u,c,s),u=u[c]}return t};var hr=function(t,e,n){return null==t?t:dr(t,e,n)},yr=require("prop-types");function gr(t){var e=t.title,n=t.value,r=t.onChange;return c.createElement("div",null,c.createElement("span",null,e),c.createElement("input",{value:n,onChange:r}))}gr.propTypes={title:yr.string,value:yr.string,onChange:yr.func.isRequired};var br,_r="AS:string",jr="AS:color",mr=[_r,"AS:number",jr,"AS:phone"],Or=require("prop-types");function wr(t){var e=t.title,n=t.value,r=t.onChange;return c.createElement("div",null,c.createElement("span",null,e),c.createElement("input",{type:"color",value:n,onChange:r}))}wr.propTypes={title:Or.string,value:Or.string,onChange:Or.func.isRequired};var Ar=require("prop-types"),Cr=(a(br={},jr,wr),a(br,_r,gr),br),Sr=function(t){function n(t){i(this,n);var e=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.onChange=e.onChange.bind(e),e}return f(n,t),s(n,[{key:"onChange",value:function(t){this.props.onChange(this.props.path,t.target.value)}},{key:"render",value:function(){var t=this.props.type,e={title:this.props.title,value:this.props.value,onChange:this.onChange},n=Cr[t];if(!n)throw new Error("Wrong action type");return c.createElement(n,e)}}]),n}(c.PureComponent);Sr.propTypes={path:Ar.string.isRequired,type:Ar.oneOf(mr),value:Ar.any,title:Ar.string,onChange:Ar.func.isRequired};var Er=require("prop-types"),kr=require("react-popover"),Pr=function(t){function n(t){i(this,n);var e=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={openAction:!1},e.openAction=e.openAction.bind(e),e.closeActions=e.closeActions.bind(e),e.generateComponentAction=e.generateComponentAction.bind(e),e.handleChange=e.handleChange.bind(e),e}return f(n,t),s(n,[{key:"openAction",value:function(t){t.preventDefault(),this.setState({openAction:!0})}},{key:"closeActions",value:function(){this.setState({openAction:!1})}},{key:"handleChange",value:function(t,e){var n={};hr(n,t+".defaultValue",e),console.log(n),this.props.actoservice.updateConfig(n)}},{key:"generateComponentAction",value:function(){var e=this,t=this.props.actoservice,n=t.paths,r=t.scheme;return n.map(function(t){return c.createElement(Sr,{key:t,path:t,title:It(r,t+".title"),onChange:e.handleChange,type:It(r,t+".type"),value:It(r,t+".value")})})}},{key:"render",value:function(){var t=this.props.actoservice,e=r.cloneElement(this.props.children,{actoservice:{scheme:t.scheme}});return t.isEditing?c.createElement("div",{onContextMenu:this.openAction,style:{display:"inline-block"}},c.createElement(kr,{isOpen:this.state.openAction,body:this.generateComponentAction(),onOuterAction:this.closeActions},c.createElement("div",null,e))):e}}]),n}(c.PureComponent);Pr.propTypes={actoservice:Er.shape({paths:Er.arrayOf(Er.string).isRequired,schemes:Er.object,updateConfig:Er.func.isRequired,isEditing:Er.bool.isRequired}).isRequired};var Tr=c.createContext(),Mr=Tr.Provider,xr=Tr.Consumer,zr="__ACTOSERVICE__ACTION__",qr="AS:sdk:change_edit",Rr="AS:sdk:update_config",Fr=require("prop-types"),Ir=function(t){function n(t){i(this,n);var e=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={configMap:window.__ACTOSERVICE__SCHEME__,isEditing:t.editing||vr()},window.__ACTOSERVICE__SCHEME__=null,e.updateConfig=e.updateConfig.bind(e),e}return f(n,t),s(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.scheme;this.injectCSS(),vr()&&this._registerListener(),this.props.scheme||this.state.configMap?this.state.configMap||(T(t)&&this.setState({configMap:t}),"string"==typeof t&&fetch(t).then(function(t){return t.json()}).then(function(t){return e.setState({configMap:t})}).catch(function(t){return console.error("Cant find configMap")})):console.error("Scheme is not specified")}},{key:"injectCSS",value:function(){var t=document.createElement("style");t.innerHTML="\n      .body {\n        padding: 0;\n        margin: 0;\n      }\n      .Popover {\n        z-index: 22;\n      }\n      .Popover-body {\n        display: inline-flex;\n        flex-direction: column;\n        padding: 2rem 4rem;\n        background: hsl(0, 0%, 27%);\n        color: white;\n        border-radius: 0.3rem;\n      }\n      \n      .Popover-tipShape {\n        fill: hsl(0, 0%, 27%);\n      }\n      .Target {\n        -webkit-user-select: none;\n        position: relative;\n        display: inline-block;\n        color: hsla(0, 0%, 0%, 0.45);\n        color: white;\n        white-space: pre-wrap;\n        text-align: center;\n        text-transform: uppercase;\n        border-radius: 0.2rem;\n        overflow: hidden;\n      }\n      \n      .Target-Move {\n        padding: 1rem;\n        cursor: move;\n        border-bottom: 1px solid white;\n        background: hsl(173, 69%, 48%);\n      }\n      \n      .Target-Toggle {\n        display: block;\n        padding: 1rem;\n        cursor: pointer;\n        background: hsl(346, 62%, 55%);\n      }\n      .Target.is-open .Target-Toggle {\n        background: hsl(346, 80%, 50%);\n      }\n    ",document.head.appendChild(t)}},{key:"_isASAction",value:function(t){var e=It(t,zr);return!!e&&[qr,Rr].includes(e)}},{key:"_registerListener",value:function(){var r=this;window.onmessage=function(t){var e=t.origin,n=t.data;if(console.log("message received",e,n),r._isASAction(n))switch(It(n,zr)){case qr:r.setState({editing:It(n,"payload")});break;case Rr:r.updateConfig(It(n,"payload"));break;default:console.warn("Wrong action received",n)}}}},{key:"updateConfig",value:function(e){var n=this,t=fr(this.state.configMap,e);this.setState({configMap:t},function(){var t;parent in window&&parent.postMessage((a(t={},zr,"AS:sdk:notify_updates"),a(t,"payload",{updates:e,result:n.state.configMap}),t))})}},{key:"render",value:function(){var t=this.state,e=t.configMap,n=t.isEditing,r=this.props.children;return c.createElement(Mr,{value:{configMap:e,isEditing:n,updateConfig:this.updateConfig}},c.Children.only(r))}}]),n}(c.Component);Ir.propTypes={editing:Fr.bool,scheme:Fr.oneOfType([Fr.string,Fr.object]).isRequired},t.default=Ir,t.withBind=function(u){return function(a){var t=function(t){function e(){return i(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,t),s(e,[{key:"render",value:function(){var i=this;return c.createElement(xr,null,function(t){var e=t.configMap,n=t.isEditing,r=t.updateConfig,o={};return u.forEach(function(t){hr(o,t+".value",pr(t)({configMap:e})),hr(o,t+".title",It(e,t+".__title__")),hr(o,t+".type",It(e,t+".type"))}),c.createElement(Pr,{actoservice:{paths:u,scheme:o,updateConfig:r,isEditing:n}},c.createElement(a,i.props))})}}]),e}(c.Component);return t.displayName="withBind ["+(a.displayName||a.name)+"]",t}},t.bindValue=function(t){return c.createElement(xr,null,pr(t))},t.Types=mr,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=actoservice.js.map
